- shared_list = defined?(shared_list) ? shared_list : nil
- share = defined?(share) && share == true

%li
  .tools
    - unless share
      - unless shared_list
        = link_to("Editar", edit_subscriber_list_path(subscriber_list)) + " | "
        = link_to("Compartir", share_subscriber_list_path(subscriber_list)) + " | "
        = link_to("Eliminar", subscriber_list, :method => :delete, :confirm => '¿Estás seguro?') + " "
      - else
        = link_to("Dejar de compartir", unshare_subscriber_list_path(subscriber_list, :idx => shared_list.id))

  .indentslim
    = link_to h(subscriber_list.name), subscriber_list_path(subscriber_list)
    - unless shared_list || share
      %tt
        = " &ndash; "
        = t(:added_by, :time_ago => time_ago_in_words(subscriber_list.created_at), :user => (subscriber_list.user_id == current_user.id ? t(:me) : h(subscriber_list.user.full_name)))
      %dt
        = pluralize(subscriber_list.contacts.length, "contacto", "contactos")
      - if (shared_lists = subscriber_list.active_shared_lists).present?
        %dt
          Compartida con 
          - shared_lists.each_with_index do |sl, index|
            = ", " if index != 0
            = link_to(sl.space.name, unshare_subscriber_list_path(subscriber_list, :idx => sl.id), :confirm => "¿Quiere dejar de compartir esta lista con #{sl.space.name}?", :style => 'color:#B71739;')
            = "hasta el #{l(sl.expires_at, :format => :long)}"
    - else
      - if share
        %tt
          = " &ndash; "
          = t(:added_by, :time_ago => time_ago_in_words(subscriber_list.created_at), :user => (subscriber_list.user_id == current_user.id ? t(:me) : h(subscriber_list.user.full_name)))
        %dt= pluralize(subscriber_list.contacts.length, "contacto", "contactos")
        %dt
          = "Compartida por el espacio <b>#{subscriber_list.shares_space.name}</b>"
          = "hasta el #{l(subscriber_list.expires_at.to_date, :format => :long)}"
