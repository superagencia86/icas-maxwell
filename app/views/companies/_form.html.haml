= f.hidden_field :user_id, :value => current_user.id
.remote
  .section
    %table(width="500" cellpadding="0" cellspacing="0")
      %tr
        %td(valign="top")
          .label.top.req= "Nombre"
          = f.text_field :name, :style => "width:224px"
        %td= spacer
        %td{ :valign => :top }
          .label.top Email
          = f.text_field :email, :style => "width:240px"

      %tr
        %td(valign="top")
          .label.top= "CIF"
          = f.text_field :cif, :style => "width:224px"
        %td= spacer
        %td{ :valign => :top }
          .label.top Denominación social
          = f.text_field :social_name, :style => "width:240px"
      %tr
        %td(valign="top")
          .label.top= "Teléfono (primario)"
          = f.text_field :phone_1, :style => "width:224px"
        %td= spacer
        %td(valign="top")
          .label.top= "Teléfono (secundario)"
          = f.text_field :phone_2, :style => "width:224px"
        %td= spacer
        %td(valign="top")
          .label.top= "Fax"
          = f.text_field :fax, :style => "width:224px"
      %tr
        %td(valign="top")
          .label.top= "Localidad"
          = f.text_field :locality, :style => "width:224px"
        %td= spacer
        %td(valign="top")
          .label.top= "Provincia"
          = f.collection_select :province_id, PROVINCES, :idx, :name, :include_blank => true
        %td= spacer
        %td(valign="top")
          .label.top= "País"
          = f.text_field :country
      %tr
        %td{ :valign => :top }
          .label.top Dirección
          = f.text_area :address, :style =>"width:240px", :rows => 4
        %td= spacer
        %td{ :valign => :top }
          .label.top Dirección de envío
          = f.text_area :address_mailing, :style =>"width:240px", :rows => 4

        %td= spacer
        %td{ :valign => :top }
          .label.top Dirección de facturación
          = f.text_area :address_billing, :style =>"width:240px", :rows => 4

  .subtitle= "Webs"
  .section
    %table(cellpadding="0" cellspacing="0")
      %tr
        %td(valign="top")
          = f.text_field :web_1, :style => "width:240px"
        %td= spacer
        %td{ :valign => :top }
          = f.text_field :web_2, :style => "width:240px"
        %td= spacer
        %td{ :valign => :top }
          = f.text_field :web_3, :style => "width:240px"

  .subtitle= "Situación actual"
  .section    
    %table{:width => 700, :cellpadding => 0, :cellspacing => 0}
      %tr
        %td{ :valign => :top }
          .label.top Estado
          = f.collection_select :state, COMPANY_STATE, :idx, :name, :selected => (@company.state.to_sym if @company.state.present?), :include_blank => true
        %td= spacer
        %td{ :valign => :top }
          .label.top Último contacto
          = f.text_field :last_contact
        %td= spacer
        %td(valign="top")
          .label.top= "Responsable del contacto"
          = f.collection_select :assigned_to, current_space.users, :id, :full_name, :include_blank => true

  .subtitle= "Relación"
  .section
    %table{ :width => 800, :cellpadding => 0, :cellspacing => 0 }
      %tr
        %td{ :colspan => 3 }
          %table{ :width => "100%", :cellpadding => 0, :cellspacing => 0 }
            %tr
              %td{ :valign => :top }
                .label Relación
                - for relationship in Relationship.find(:all)
                  %div
                    = check_box_tag "company[relationship_ids][]", relationship.id, !@company.new_record? && @company.relationships.include?(relationship)
                    = relationship.name

              %td= spacer
              %td{ :valign => :top }
                .label Tipo de empresa
                - for company_type in CompanyType.find(:all)
                  %div
                    = check_box_tag "company[company_type_ids][]", company_type.id, !@company.new_record? && @company.company_types.include?(company_type)
                    = company_type.name
    
            %tr
              %td{ :valign => :top }
                .label Sector
            %tr
              - Sector.find(:all).in_groups_of(12, false) do |sectors|
                %td{ :valign => :top }
                  - sectors.each do |sector|
                    %div
                      = check_box_tag "company[sector_ids][]", sector.id, !@company.new_record? && @company.sectors.include?(sector)
                      = sector.name
                %td= spacer

